# Taller Individual 3
## EDA (Exploratory Data Analysis)

**Semana:** 12  
**Asignatura:** Programación Funcional y Reactiva  

---

### Objetivos:
- Crear un `case class` en Scala para modelar datos específicos de un archivo CSV de la LigaPro.
- Manipular colecciones de datos y realizar operaciones de filtrado y cálculos estadísticos básicos.
- Aplicar una fórmula matemática de dispersión mediante el uso de funciones de agregación.

> [!IMPORTANT]
> Resolver el siguiente problema de forma **individual**. El archivo a utilizar es: [**`LigaPro2025-2026.csv`**](https://www.dropbox.com/scl/fi/f0e2dybzz48zp8i2aj01a/LigaPro2025-2026.csv?rlkey=sw9z7mwrzvpj3kpiht2xfoz09&st=xdgxbms2&dl=0). El estudiante debe desarrollar toda la solución (definición de estructura, lectura y análisis) en **un mismo archivo de Scala**. El trabajo se presenta directamente al docente en el aula.

---

### Parte 1: Definición de case class y lectura de archivo

1. **Definición de la estructura:** Cree una `case class` llamada `Jugador` que permita leer las siguientes columnas del archivo CSV: `Pos`, `Nombre`, `Equipo`, `PJ` y `Goles`.

2. **Implementación de lectura:** Utilizando la librería `fs2-data-csv` y el stack de `Cats Effect`, realice la lectura del archivo y convierta los datos en una lista de objetos de tipo `Jugador`. 
    - **Nota:** El delimitador del archivo es la coma (`,`).

---

### Parte 2: Análisis de datos (EDA)

Utilizando la lista de objetos obtenida en la parte anterior, implemente la lógica dentro del mismo programa para obtener los siguientes indicadores:

1. **Sumatoria:** Calcule el total de goles marcados por todos los jugadores en el listado.
2. **Promedio:** Obtenga el promedio de partidos jugados (`PJ`) de todos los jugadores.
3. **Valores Extremos:** Encuentre el valor **máximo** y el valor **mínimo** de la columna de partidos jugados (`PJ`).
4. **Estadístico Adicional (Desviación Media):** Calcule la Desviación Media de los goles. Este estadístico mide cuánto se alejan, en promedio, los goles de cada jugador respecto a la media aritmética. 

La fórmula es:

$$
DM = \frac{\sum_{i=1}^{n} |x_i - \overline{x}|}{n}
$$

Donde:
- $x_i$: es el número de **goles** de cada jugador.
- $\overline{x}$: es el promedio de **goles** del conjunto.
- $n$: es el número total de jugadores.
- $| \dots |$: representa el valor absoluto.

---

### Parte 3: Análisis Crítico (Comentario en el Código)

**Instrucción de cierre:** Una vez obtenido el valor de la **Desviación Media (DM)**, el estudiante no debe simplemente imprimirlo, sino que debe **redactar una conclusión breve como un comentario de bloque (`/* ... */`) al final de su archivo de código Scala**. 

En dicho comentario, debe inferir lo siguiente basándose en el resultado:
* ¿Qué interpretación le da a este valor respecto a la consistencia de los goleadores de la liga? (¿Están todos cerca del promedio o hay mucha disparidad?).


# CÓDIGO SCALA:


```scala
import cats.effect.{IO, IOApp}
import fs2.io.file.{Files, Path}
import fs2.data.csv._
import fs2.data.csv.generic.semiauto._

case class Jugador(Pos: Int, Nombre: String, Equipo: String, PJ: Int, Goles: Int)

object Taller3 extends IOApp.Simple {
  implicit val jugadorDecoder:CsvRowDecoder[Jugador,String]=deriveCsvRowDecoder
  override def run:IO[Unit]={
    val streamDatos=Files[IO].readAll(Path("LigaPro2025-2026.csv"))
      .through(fs2.text.utf8.decode)
      .through(decodeUsingHeaders[Jugador]())
    streamDatos.compile.toList.flatMap{lista=>
      val n=lista.size
      val sumaGoles=lista.map(_.Goles).sum
      val sumaPJ=lista.map(_.PJ).sum
      val promedioPJ=sumaPJ.toDouble/n
      val maxPJ=lista.map(_.PJ).max
      val minPJ=lista.map(_.PJ).min
      val promedioGoles=sumaGoles.toDouble/n
      val sumaDiferencias=lista.map{j=>
        Math.abs(j.Goles-promedioGoles)
      }.sum
      val desviacionMedia=sumaDiferencias/n
      IO.println(
        s"""
           Total de Goles: $sumaGoles
           Promedio de PJ: $promedioPJ
           Máximo PJ: $maxPJ
           Mínimo PJ: $minPJ
           Desviación Media: $desviacionMedia
           """.stripMargin
      )
    }
  }
}
/*
Conclusión:
El resultado de la Desviación Media es de 3.61. Esto significa que los goles de los jugadores se alejan, en promedio, 3.61 puntos del promedio general de la liga (que es 8.76). Al analizar esto, veo que hay una disparidad considerable. No todos los delanteros son igual de consistentes; hay un grupo pequeño que anota mucho (arriba de 18 goles) y otros que están bastante por debajo. El valor de 3.61 nos dice que los datos están algo dispersos y no agrupados todos cerca de la media.
*/
```


# RESULTADO:


```scala
           Total de Goles: 438
           Promedio de PJ: 30.9
           Máximo PJ: 40
           Mínimo PJ: 16
           Desviación Media: 3.6127999999999982
           

Process finished with exit code 0
```


# IMAGEN DE CODIGO EJECUTADO:
<img width="1080" height="978" alt="image" src="https://github.com/user-attachments/assets/72d88c49-408b-4c9f-8c97-65c557124b9a" />


**Explicación:** Este código lee el archivo LigaPro2025-2026.csv, convierte la información en una lista de jugadores y calcula estadísticas como el total de goles, el promedio de partidos jugados y la desviación media. Básicamente, toma los datos del archivo, realiza las operaciones matemáticas necesarias para el análisis y muestra los resultados finales en la pantalla. 


> **Nota de desarrollo:** Trabajar en un único archivo fuente de Scala que contenga la `case class`, la lógica de procesamiento y el comentario final para ser revisado por el docente.

---

### ✅ Calificación:

Una vez que termine debe presentar su trabajo a su docente.

- **10 puntos:** si presenta en el horario de prácticas y experimentación.
- **7 puntos:** si presenta en el horario de tutoría.

**La hora máxima de presentación será las 08h30.**
